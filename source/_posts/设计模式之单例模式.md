---
title: 设计模式之单例模式
date: 2023-10-16 22:42:32
tags: java
---

# 单例模式

## 饿汉式加载实现

即在类加载时就进行实例化

```java
package com.yuyonghai;
public class OtherSingleton{
    public static void main(String[] args) {
        Singleton.getInstance();
    }

}

/**
 * 单例模式的饿汉式加载，即在类加载时就实例化一个对象，并且是线程安全的
 */
  class Singleton1 {
    private static final Singleton1 INSTANCE = new Singleton1();
    
    private Singleton1() {
        // 私有构造方法
    }
    
    public static Singleton1 getInstance() {
        return INSTANCE;
    }
    
    public void test() {
        System.out.println("Hello World");
    }
}
```

## 懒汉式加载实现

```java
package com.yuyonghai;

public class load {
    public static void main(String[] args) {
        Singleton.test();
        Singleton.getInstance();
        Singleton.getInstance();
    }
}
/*
单例模式的懒汉式实现，没用加锁机制，只有静态代码块，即也就是线程安全
妙啊
 */
class Singleton {
    public static void test(){
        System.out.println("hello world");
    }
    private Singleton() {

    }
    // 内部类中保存单例
    private static class LazyHolder {
        private static final Singleton INSTANCE = new Singleton();
        static {
            System.out.println("lazy holder init");
        }
    }
    // 第一次调用 getInstance 方法，才会导致内部类加载和初始化其静态成员
    public static Singleton getInstance() {
        return LazyHolder.INSTANCE;
    }
}

```

即只有在第一次使用时才进行实例化
